---
title: "eiCompare: Doing Ecological Inference"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{my-vignette}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

Ecological Inference (EI) is a tool for estimating 

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r, include = FALSE}
library(eiCompare)
```

## The Data



```{r}
data("corona")
corona[, 3:ncol(corona)] <- round(corona[, 3:ncol(corona)] * corona$totvote)
head(corona)
```

```{r}
# corona <- dedupe_precincts(corona, "precinct")
```

```{r}
race_cols <- c("pct_hisp", "pct_non_lat")
cand_cols <- c("pct_husted", "pct_spiegel", "pct_ruth", "pct_button", "pct_montanez", "pct_fox")

corona_for_ei <- stdize_votes_all(
  data = corona,
  race_cols = race_cols,
  cand_cols = cand_cols,
  totals_from = "cand"
)
head(corona_for_ei)
```
```{r}
race_cols <- paste0(race_cols, "_prop")
cand_cols <- paste0(cand_cols, "_prop")
ei <- ei_iter(
  data = corona_for_ei,
  race_cols = race_cols,
  cand_cols = cand_cols,
  totals = "total"
)
ei
```
